---
import '@/styles/globals.css'
import { ModeToggle } from '@/components/ModeToggle.tsx'
---
<script is:inline>
	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};
	const isDark = getThemePreference() === 'dark';
	document.documentElement.classList[isDark ? 'add' : 'remove']('dark');
 
	if (typeof localStorage !== 'undefined') {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains('dark');
			localStorage.setItem('theme', isDark ? 'dark' : 'light');
		});
		observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
	}
</script>

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<header>
			<span>JeffM .</span>
			<nav>
				<ul>
					<li>
						<a href="/#projects">Projects</a>
					</li>
					<li>
						<a href="https://github.com/jeffmancilla" aria-label="GitHub"
							>GitHub</a
						>
					</li>
					<li>
						<a href="https://linkedin.com/in/jeffmancilla" aria-label="LinkedIn"
							>LinkedIn</a
						>
					</li>
				</ul>
			</nav>
            <ModeToggle client:load />
		</header>
		<main>
			<slot />
		</main>
		<footer>Built with Astro</footer>
	</body>
</html>

<style>
    html {
        width: min(90vw, 75ch);
        margin: 0 auto;
    }
	body {
        height: 100dvh;

        display: flex;
        flex-direction: column;
	}
    header, main, footer {
        margin-block: 1rem;
    }
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
    }
    header :first-child {
        flex-grow: 1;
    }
    nav > ul {
        display: flex;
        align-items: center;
        gap: 1rem;
    }
    main {
        flex-grow: 1;
    }
    footer {
        display: flex;
        justify-content: center;
    }
</style>
