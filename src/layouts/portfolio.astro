---
import '@/styles/globals.css'
import { ModeToggle } from '@/components/ModeToggle.tsx'
---

<script is:inline>
	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme')
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches
			? 'dark'
			: 'light'
	}
	const isDark = getThemePreference() === 'dark'
	document.documentElement.classList[isDark ? 'add' : 'remove']('dark')

	if (typeof localStorage !== 'undefined') {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains('dark')
			localStorage.setItem('theme', isDark ? 'dark' : 'light')
		})
		observer.observe(document.documentElement, {
			attributes: true,
			attributeFilter: ['class'],
		})
	}
</script>

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Jeff Mancilla</title>
	</head>
	<body>
		<header>
			<span class="font-extrabold">JeffM .</span>
			<div class="flex gap-4">
				<nav>
					<a href="/#projects">Projects</a>
					<a href="https://github.com/jeffmancilla" aria-label="GitHub"
						>GitHub</a
					>
					<a href="https://linkedin.com/in/jeffmancilla" aria-label="LinkedIn"
						>LinkedIn</a
					>
				</nav>
				<ModeToggle client:load />
			</div>
		</header>
		<main>
			<slot />
		</main>
		<footer class="opacity-70 text-sm">
			Â© Jeff Mancilla 2024. Built with Astro
		</footer>
	</body>
</html>

<style>
	* {
		box-sizing: border-box;
	}
	html {
		scroll-behavior: smooth;
		width: 100%;
	}
	body {
		height: 100svh;

		display: flex;
		flex-direction: column;
	}
	header,
	footer {
		padding: 1rem;
	}
	header {
		display: flex;
		flex-wrap: wrap;
		justify-content: space-between;
		align-items: center;
	}
	nav {
		display: flex;
		align-items: center;
		gap: 1rem;
	}
	nav a {
		opacity: 0.75;
	}
	nav a:hover {
		opacity: 1;
	}
	main {
		flex-grow: 1;
		margin: 0 auto;
		width: min(90vw, 75ch);
	}
	footer {
		display: flex;
		justify-content: center;
	}
</style>
