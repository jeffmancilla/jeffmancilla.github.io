---
import BaseLayout from "../../layouts/BaseLayout.astro"

const title = "Projects"
const description = "Latest articles."
const permalink = `${Astro.site!.href}projects`

let allPosts = await Astro.glob("../../data/projects/*.md")
allPosts = allPosts.sort(
	(a, b) =>
		new Date(b.frontmatter.publishDate).valueOf() -
		new Date(a.frontmatter.publishDate).valueOf()
)
---

<BaseLayout
	title={title}
	description={description}
	permalink={permalink}
	current="projects"
>
	<div class="container">
		<h1 class="text-6xl text-accent font-extrabold mb-6">Projects</h1>
		{
			allPosts.map((post, index) => {
				const href = `/projects/${post.file
					.split("/")
					.pop()
					?.split(".")
					.shift()}`
				return (
					<div>
						{index !== 0 && <hr />}
						<div class="flex flex-col gap-2">
							<div class="uppercase">{post.frontmatter.publishDate}</div>
							<h2 class="text-3xl font-extrabold mb-3">
{post.frontmatter.title}</h2>
							<div class="mb-3">
								<span>{post.frontmatter.skills}</span>
							</div>
							<p class="text-lg mb-3">{post.frontmatter.description}</p>
							<div>
								<a class="btn btn-sm btn-neutral" href={post.frontmatter.link}>
									Link
								</a>
								<a
									class="btn btn-sm btn-outline"
									href={post.frontmatter.github}
								>
									Repo
								</a>
							</div>
						</div>
					</div>
				)
			})
		}
	</div>
</BaseLayout>
