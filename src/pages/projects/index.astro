---
import BaseLayout from "../../layouts/BaseLayout.astro"

const title = "Projects"
const description = "Latest articles."
const permalink = `${Astro.site!.href}projects`

let allPosts = await Astro.glob("../../data/projects/*.md")
allPosts = allPosts.sort(
	(a, b) =>
		new Date(b.frontmatter.publishDate).valueOf() -
		new Date(a.frontmatter.publishDate).valueOf()
)
---

<BaseLayout
	title={title}
	description={description}
	permalink={permalink}
	current="projects"
>
	<div class="container">
		<h1>Projects</h1>
		{
			allPosts.map((post, index) => {
				const href = `/projects/${post.file
					.split("/")
					.pop()
					?.split(".")
					.shift()}`
				return (
					<div>
						{index !== 0 && <hr />}
						<div class="flex flex-col gap-2">
							<div> {post.frontmatter.publishDate}</div>
							<h2>
								<a href={href}>{post.frontmatter.title}</a>
							</h2>
							<div>
								<span>{post.frontmatter.skills}</span>
							</div>
							<p>{post.frontmatter.description}</p>
							<div>
								<a class="btn btn-sm btn-neutral" href={post.frontmatter.link}>
									Link
								</a>
								<a
									class="btn btn-sm btn-outline"
									href={post.frontmatter.github}
								>
									Repo
								</a>
							</div>
						</div>
					</div>
				)
			})
		}
	</div>
</BaseLayout>

<style>
	h2,
	.post-item-footer {
		font-family: var(--font-family-sans);
		font-weight: 700;
		margin-block: 0;
	}

	.post-item-date {
		color: var(--text-secondary);
		text-align: left;
		text-transform: uppercase;
		margin-right: 16px;
	}

	hr {
		margin: 60px auto;
	}
</style>
